
<div class="panel  panel-primary"   style="font-size:85%" >
    <div class="panel-heading">
        <h3 class="page-title " style="color:#fff">New Job</h3>
    </div>
    <div class="panel-body">






        <form class="form-horizontal form-border" name="jobInfo" novalidate angular-validator angular-validator-submit='intimate()'  autocomplete="off">



            <fieldset ng-disabled="saving">
                <div class="form-group">
                    <div class="col-sm-6">
                        <label class="col-sm-4 control-label  "> Call Date and Time </label>

                        <div class="col-sm-8">

                            <div class="dropdown">
                                <a class="dropdown-toggle" id="cdt" role="button" data-toggle="dropdown" data-target="#" href="">
                                    <input type="text" class="form-control input-sm" ng-model="job.callDate" readonly>
                                </a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel3">
                                    <datetimepicker data-ng-model="job.callDate"
                                                    data-datetimepicker-config="{ dropdownSelector: '#cdt' ,minView:'minute',modelType:'YYYY-MM-DD hh:mm:ss A'}"></datetimepicker>
                                </ul>
                            </div>


                        </div> 
                    </div>

                </div>


                <div class="form-group">



                    <div class="col-sm-2">
                        <label class="pull-right  ">Name of Insured</label>
                    </div>

                    <div class="col-sm-4">
                        <label class="pull-left  ">{{activePolicyGeneral.insuredName}}</label>
                    </div>

                </div>


                <div class="form-group">

                    <div class="col-sm-2"> 
                        <label class="pull-right  ">Policy Type</label>
                    </div>
                    <div class="col-sm-8">
                        <label class="pull-left  ">{{activePolicyGeneral.productCode}}</label>
                    </div>

                </div>


                <div class="form-group">

                    <div class="col-sm-2"> 
                        <label class="pull-right  ">Policy Number</label>
                    </div>
                    <div class="col-sm-2">
                        <label class="pull-left  ">{{activePolicyGeneral.policyNo}}</label>
                    </div>

                </div> 

                <div class="form-group">

                    <div class="col-sm-2">
                        <label class="pull-right  ">Insured Tel</label>
                    </div>

                    <div class="col-sm-4">
                        <label class="pull-left  ">{{activePolicyGeneral.mobileNo}}</label>
                    </div>

                </div>

                <div class="form-group">

                    <div class="col-sm-2">
                        <label class="pull-right  ">Branch</label>
                    </div>

                    <div class="col-sm-4">
                        <label class="pull-left  ">{{activePolicyGeneral.branchCode}}</label>
                    </div>



                </div>

                <div class="form-group">


                    <div class="col-sm-2"> 
                        <label class="pull-right  ">Policy Status</label>
                    </div>
                    <div class="col-sm-2">
                        <span class="label  text-uppercase" ng-class="activePolicyGeneral.policyStatus == 'ACTIVE POLICY' ? 'label-success': activePolicyGeneral.policyStatus == 'PPW CANC' ? 'label-info':'label-danger'">
                            {{activePolicyGeneral.policyStatus}}
                        </span>

                    </div>

                    <div class="col-sm-2"> 
                        <label class="pull-right  ">Last Loss Date </label>
                    </div>
                    <div class="col-sm-2">
                       
                        <span class="label  text-uppercase label-warning" style="font-size:80%">   {{lastInti.lossDate || 'N/A'}} </span>

                    </div>

                    <div class="col-sm-2"> 
                        <label class="pull-right  ">Last NMI No </label>
                    </div>
                    <div class="col-sm-2">
                        <span class="label  text-uppercase label-info" style="font-size:80%">   {{lastInti.docNo || 'N/A' }} </span>

                    </div>

                </div>

                <hr>

                <div class="form-group">


                    <label class="col-sm-2 control-label">Caller Phone</label>


                    <div class="col-sm-4">
                        <input type="text" name="callerPhone" ng-model="job.callerPhone" class="form-control input-sm"  ng-pattern="'^[0-9]{10}$'"  required-message = "'*Mobile Number Required '"  validate-on="dirty"  invalid-message = "'*10 digits required'" required>
                    </div>



                </div>
                
                <div class="form-group">
                
                
                    <label class="col-sm-2 control-label">Caller Name</label>


                    <div class="col-sm-4">
                        <input type="text"   name="callerName" ng-model="job.callerName" class="form-control input-sm" required-message = "'*Caller Name Required '"  required>
                    </div>
                
                
                </div>

                <div class="form-group">


                    <label class="col-sm-2 control-label">Date and Time of loss</label>


                    <div class="col-sm-4">
                        <div class="dropdown">
                            <a class="dropdown-toggle" id="dtl" role="button" data-toggle="dropdown" data-target="#" href="">
                                <input type="text" class="form-control input-sm" ng-model="job.lossDate" readonly>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel4">
                                <datetimepicker data-ng-model="job.lossDate"
                                                data-datetimepicker-config="{ dropdownSelector: '#dtl' ,minView:'minute',modelType:'YYYY-MM-DD hh:mm:ss A'}"></datetimepicker>
                            </ul>
                        </div>
                    </div>




                </div>


                <div class="form-group">


                    <label class="col-sm-2 control-label">Type of Loss</label>


                    <div class="col-sm-4">
                        <textarea type="text" ng-model="job.lossType" class="form-control input-sm" name="lossType" required-message = "'*Type of Loss Required '"    required></textarea>
                    </div>


                  
                </div>
                
                <div class="form-group">
                
                
                  <label class="col-sm-2 control-label">Damages</label>


                    <div class="col-sm-10">
                        <textarea type="text" ng-model="job.damages" name="damages" class="form-control input-sm" required-message = "'*Damages Required '" required></textarea>
                    </div>

                
                </div>

                <div class="form-group">

                    <div hidden="true">
                        <label class="col-sm-2 control-label">Estimated Loss</label>


                        <div class="col-sm-4">
                            <input type="text"  name="lossValue" ng-model="job.lossValue" class="form-control input-sm" ng-pattern="'^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?$'"    validate-on="dirty"  invalid-message = "'*Needs to be a valid amount'"     >
                        </div>
                    </div>

                    <label class="col-sm-2 control-label">Place of Loss</label>


                    <div class="col-sm-10">
                        <input type="text" class="form-control input-sm"     ng-model="job.lossPlace" ng-init="job.lossPlace = ''"  name="placeOfLoss"  required-message = "'*Place of Loss Required '"  required > 
                    </div>

                </div>
                
                <div class="form-group">
                
                
                     <label class="col-sm-2 control-label">Nearest Town</label>


                    <div class="col-sm-5">
                        <input type="text" class="form-control input-sm"   g-places-autocomplete options="autocompleteOptions"  ng-model="job.nearestTown" ng-init="job.nearestTown = ''"   > 
                    </div>
                
                </div>

                
                
                  <hr>

                <div class="form-group">
                    <label class="col-sm-2 control-label">Assessor Name </label>
                    <div class="col-sm-6"> 

                 

                        <ui-select  ng-model="job.assessors " style="width:100%"  limit = "15" >
                            <ui-select-match>
                                <span>{{$select.selected.display}}</span>
                            </ui-select-match>

                            <ui-select-choices repeat="item in (assessorsList|filter:$select.search | limitTo:$select.limit) track by item.userCode">
                                <span>{{item.display}}</span>    
                            </ui-select-choices>
                        </ui-select>

                    </div>

                    <label class="col-sm-2 control-label">{{job.assessors.userCode}} </label>
                    <div class="col-md-2">
                        <button  type="button" class="btn btn-sm btn-info btn-block" ng-click="assesorMap(job)">Show Map</button>

                    </div>

                </div>


              
                

                <div class="form-group"  >


                    <label class="col-sm-2 control-label">Alloc. Date and Time</label>


                    <div class="col-sm-4">
                        <div class="dropdown">
                            <a class="dropdown-toggle" id="alloc" role="button" data-toggle="dropdown" data-target="#" href="">
                                <input type="text" class="form-control input-sm" ng-model="job.allocDate" readonly>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel5">
                                <datetimepicker data-ng-model="job.allocDate"
                                                data-before-render="beforeRender($view, $dates, $leftDate, $upDate, $rightDate)"
                                                data-datetimepicker-config="{ dropdownSelector: '#alloc' ,minView:'minute',modelType:'YYYY-MM-DD hh:mm:ss A'}"></datetimepicker>
                            </ul>
                        </div>
                    </div>




                </div>
                
                                <div class="form-group"  >


                    <label class="col-sm-2 control-label">Comp. Date and Time</label>


                    <div class="col-sm-4">
                        <div class="dropdown">
                            <a class="dropdown-toggle" id="comp" role="button" data-toggle="dropdown" data-target="#" href="">
                                <input type="text" class="form-control input-sm" ng-model="job.completeDate" readonly>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel5">
                                <datetimepicker data-ng-model="job.completeDate"
                                                data-before-render="beforeRender($view, $dates, $leftDate, $upDate, $rightDate)"
                                                data-datetimepicker-config="{ dropdownSelector: '#comp' ,minView:'minute',modelType:'YYYY-MM-DD hh:mm:ss A'}"></datetimepicker>
                            </ul>
                        </div>
                    </div>
                                    <div class="col-md-1">
                                    
                                    <button type="button" class="btn btn-info btn-sm btn-block" ng-click="resetTime()">Reset</button>
                                    </div>




                </div>

                
         

                <div class="form-group" hidden="true">


                    <label class="col-sm-2 control-label">Funerel Expenses</label>


                    <div class="col-sm-4">
                        <input type="text" name="funeral" ng-model="job.funeral" class="form-control input-sm" ng-pattern="'^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?$'"    validate-on="dirty"  invalid-message = "'*Needs to be a valid amount'" >
                    </div>


                </div>

                <div class="form-group">


                    <label class="col-sm-2 control-label">Comment  </label>


                    <div class="col-sm-10">
                        <textarea type="text" ng-model="job.comment1" class="form-control input-sm"></textarea>
                    </div>


                </div>

                <div class="form-group" hidden="true">


                    <label class="col-sm-2 control-label">Comment 2</label>


                    <div class="col-sm-10">
                        <textarea type="text" ng-model="job.comment2" class="form-control input-sm"></textarea>
                    </div>


                </div>

            </fieldset>
            <hr>

            <div class="form-group">
                <div class="col-md-offset-8 col-md-2">

                    <button type="reset" class="btn  btn-sm btn-block btn-info" ng-show="saving " ng-click="intimationView(savedIntimation)">Edit - {{savedIntimation}} </button> 
                </div>
                <div class=" col-md-2"><!-- ng-click="intimation()" -->
                    <button  type="submit" class="btn btn-sm btn-success btn-block" ng-disabled="saving"> Save</button>

                </div>
            </div>
        </form>  




    </div>


</div>